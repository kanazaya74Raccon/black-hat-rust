.PHONY: all
all: shellcode exploit


.PHONY: shellcode
shellcode:
	mkdir -p libnss_x
	cd shellcode && cargo +nightly build -p shellcode --release --lib
	cp shellcode/target/release/libx.so libnss_x/x.so.2


.PHONY: exploit
exploit:
	cargo build -p exploit --release
	cp target/release/exploit rust_exploit

.PHONY: clean
clean:
	rm -rf target libnss_x
